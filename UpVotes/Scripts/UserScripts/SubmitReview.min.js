function addRating(n){$("#hdnRating")[0].value=n;$("#divAddRating").find("span").removeClass("rateaddreview");$("#divAddRating").find("span").addClass("ratedisabledaddreview");for(var t=1;t<=n;t++)$("#spnRate_"+t).removeClass("ratedisabledaddreview"),$("#spnRate_"+t).addClass("rateaddreview")}$(document).ready(function(){function n(n){return/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/.test(n)}$.clearCreateReviewControls=function(){$("#txtProjectName")[0].value="";$("#ddlServiceCategory")[0].value="0";$("#txtFeedBackSummary")[0].value="";$("#txtUserName")[0].value="";$("#txtDesignation")[0].value="";$("#txtcompanyName")[0].value="";$("#txtPhoneNumber")[0].value="";$("#txtEmail")[0].value="";$("#hdnRating")[0].value="";$("#txtCompanyBeingReviewed")[0].value="";$("#divAddRating").find("span").removeClass("rateaddreview");$("#divAddRating").find("span").addClass("ratedisabledaddreview")};$.ClearDropdown=function(n){var i,t;if(n[0].options!=undefined)for(i=n[0].options,t=1;t<i.length;t++)i.remove(t),t--};$.fn.LoadOptions=function(n,t,r){if(n!=undefined&&n!=null)for(this.sel=$(this),i=0;i<n.length;i++)this.sel.append($("<option style='color:black;' title='"+$(n[i]).attr(t)+"' value='"+$(n[i]).attr(r)+"' >"+$(n[i]).attr(t)+"<\/option>"))};$.getFocusAreas=function(){$.ajax({url:$.absoluteurl("/Company/GetFocusArea"),cache:!1,async:!1,datatype:"json",type:"GET",success:function(n){$.ClearDropdown($("#ddlServiceCategory"));$("#ddlServiceCategory").LoadOptions(n.focusAreaList,"FocusAreaName","FocusAreaID")}})};$("#btnSubmitReview").click(function(){if($("#hdnCompanyID")[0]==undefined||$("#hdnCompanyID")[0].value=="")alert("Please login and select a company to submit review...");else{var n=document.getElementById("hdnCompanyName").value;$("#txtCompanyBeingReviewed")[0].value=n}$("#dialog").dialog({beforeClose:function(){return $.clearCreateReviewControls()},modal:!0,hide:"slide",width:"90%",position:"center",title:"Submit Review"});$.getFocusAreas()});$.ValidateInputFields=function(){var t=!0;return $("#divErrorMessage")[0].innerHTML="",$("#txtProjectName")[0].value==""&&(t=!1,$("#divErrorMessage").append("<p>Project Name is required.<\/p>")),$("#txtProjectName")[0].value==""&&(t=!1,$("#divErrorMessage").append("<p>Project Name is required.<\/p>")),$("#ddlServiceCategory")[0].value=="0"&&(t=!1,$("#divErrorMessage").append("<p>Service Category is required.<\/p>")),$("#txtFeedBackSummary")[0].value==""?(t=!1,$("#divErrorMessage").append("<p>FeedBack is required.<\/p>")):$("#txtFeedBackSummary")[0].value.length>4e3&&(t=!1,$("#divErrorMessage").append("<p>Feedback cannot be greater than 4000 characters.<\/p>")),$("#hdnRating")[0].value==""&&(t=!1,$("#divErrorMessage").append("<p>Rating is required.<\/p>")),$("#txtPhoneNumber")[0].value==""&&(t=!1,$("#divErrorMessage").append("<p>Phone Number is required.<\/p>")),$("#txtEmail")[0].value==""?(t=!1,$("#divErrorMessage").append("<p>Email is required.<\/p>")):n($("#txtEmail")[0].value)||(t=!1,$("#divErrorMessage").append("<p>Invalid email address.<\/p>")),t?($("#divErrorMessage")[0].innerHTML="",$("#divErrorMessage").hide()):$("#divErrorMessage").show(),t};$("#btnSaveReviews").click(function(){if($.ValidateInputFields()){var n=$("#hdnCompanyID")[0].value,t=$("#ddlServiceCategory")[0].value,i=$("#txtcompanyName")[0].value,r=$("#txtDesignation")[0].value,u=$("#txtProjectName")[0].value,f=$("#txtFeedBackSummary")[0].value,e=$("#hdnRating")[0].value,o=$("#txtPhoneNumber")[0].value,s=$("#txtEmail")[0].value,h="{CompanyID:'"+parseInt(n)+"',FocusAreaID:'"+parseInt(t)+"',ReviewerCompanyName:'"+i+"',Email:'"+s+"',PhoneNumber:'"+o+"',Designation:'"+r+"',ProjectName:'"+u+"',FeedBack:'"+f+"', Rating:'"+parseInt(e)+"'}";$.ajax({url:$.absoluteurl("/Company/AddReview"),mtype:"POST",cache:!1,datatype:"json",data:{companyReviewModel:h},success:function(n){n=="True"&&(alert("Thank you for your feedback"),$("#dialog").dialog("close"),window.location.reload())},error:function(n,t,i){alert(n+"-"+t+"-"+i);$("#divErrorMessage").append("<p>Error- '"+n+"-"+t+"-"+i+ + "'.</p>");$("#divErrorMessage").show()}})}})});