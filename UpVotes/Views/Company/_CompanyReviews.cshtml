@model UpVotes.Models.CompanyViewModel

<style type="text/css">
    .morecontent span {
        display: none;
    }

    .morelink {
        display: block;
    }
    .fa {
    float: right;
    }
    .fa {
    display: inline-block;
    font: normal normal normal 14px/1 FontAwesome;
    font-size: inherit;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transform: translate(0, 0);
}
</style>
<script src="~/Scripts/UserScripts/CompanyReviews.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
    $('.panel-title a').bind('click', function () {  $(this).find('i').toggleClass('fa-plus fa-minus')
                       .closest('panel').siblings('panel')
                       .find('i')
                       .removeClass('fa-minus').addClass('fa-plus'); });
});
</script>
@if (Model != null)
{
    int counter = 0;
    <div id="Reviews-main">
        <div id="accordion" class="panel-group" role="tablist" aria-multiselectable="true">
            @foreach (var company in Model.CompanyList)
            {
                if(company.CompanyReviews != null && company.CompanyReviews.Count > 0)
                { 
                <div class="panel panel-default">
                    <div id="@(company.CompanyName.Replace(" ", ""))" class="panel-heading" role="tab">
                        <h4 class="panel-title">
                        @if (counter == 0)
                        {
                            <a href="@("#" + company.CompanyName.Replace(" ", "") + counter.ToString())" class="" data-toggle="collapse" data-parent="#accordion" aria-expanded="true" aria-controls="@("#" + company.CompanyName.Replace(" ", "") + counter.ToString())"> @company.CompanyName <i class="accordion_icon fa fa-plus"></i></a>
                            
                        }
                        else
                        {
                            <a href="@("#" + company.CompanyName.Replace(" ", "") + counter.ToString())" aria-expanded="false" class="collapsed" data-toggle="collapse" data-parent="#accordion" aria-controls="@("#" + company.CompanyName.Replace(" ", "") + counter.ToString())"> @company.CompanyName <i class="accordion_icon fa fa-plus"></i></a>
                            
                        }
                        </h4>
                    </div>
                    <div id="@(company.CompanyName.Replace(" ", "") + counter.ToString())" class="panel-collapse collapse" role="tabpanel" aria-labelledby="@(company.CompanyName.Replace(" ", ""))">
                        <div class="panel-body">
                            @if (company.CompanyReviews != null)
                    {
                        <div class="user-reviews-card-wrapper">
                            @foreach (var companyReview in company.CompanyReviews)
                            {
                                <div class="user-reviews-card">
                                    <div class="fonder-profile">
                                        <img src="@companyReview.UserProfilePicture">
                                        <p class="founder-name">@companyReview.ReviewerFullName</p>
                                        <p><span>@companyReview.ReviewerDesignation</span><span>@companyReview.ReviewerCompanyName</span></p>
                                        <div>
                                            <ul class="ratings">
                                                @for (int i = 0; i < companyReview.Rating; i++)
                                                {
                                            <li><span class="rate" aria-hidden="true">★</span></li>
                                                }
                                                @for (int i = companyReview.Rating; i < 5; i++)
                                                {
                                            <li><span class="ratedisabled" aria-hidden="true">★</span></li>
                                                }
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="tech-used">
                                        <p><span>Project Name:</span><span>@companyReview.ReviewerProjectName</span></p>
                                        <p><span>Service category:</span><span>@companyReview.FocusAreaName</span></p>
                                    </div>

                                    <div class="tech-review">
                                        <p>
                                            <span class="more">
                                                @companyReview.FeedBack
                                            </span>
                                        </p>
                                    </div>
                                    <div class="review-major-btns">
                                        <div class="input-group thankbutton">
                                            <button class="form-control" aria-label="Text input with segmented button dropdown" id="btnThankNote" CompanyReviewID=@companyReview.CompanyReviewID.ToString()><i class="fa fa-thumbs-up" aria-hidden="true"></i>Thank</button>
                                            <div class="input-group-btn">
                                                <span type="button" class="btn btn-default thankyou-adjust" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">@companyReview.NoOfThankNotes</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>

                            }
                        </div>
                    </div>
                </div>
                    counter = counter + 1;
                }
            }
            
        </div>
        </div>
        }


